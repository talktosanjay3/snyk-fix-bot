<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta and Title Block -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snyk Auto Remediation Assistant</title>
    <!-- Tailwind CSS CDN Block -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Tailwind Custom Colors Block
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'snyk-purple': '#4C1D95',
                        'snyk-blue': '#1E40AF',
                    }
                }
            }
        }
    </script>
    <!-- Particles.js CDN Block -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <style>
        /* Particles.js Background Styling Block */
        #particles-js {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            z-index: 0;
        }
        body > *:not(#particles-js) {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen">
    <!-- Particles.js Container Block -->
    <div id="particles-js"></div>

    <!-- Header Block -->
    <header class="bg-white shadow-lg border-b-4 border-snyk-purple">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <!-- Company Logo Placeholder Block -->
                    <div class="w-12 h-12 bg-gradient-to-br from-snyk-purple to-snyk-blue rounded-lg flex items-center justify-center">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Snyk Auto Remediation Assistant</h1>
                        <p class="text-sm text-gray-600">Automated Security Issue Management</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm text-gray-500">Hackathon Project</p>
                    <p class="text-xs text-gray-400">AI-Powered Security</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Block -->
    <main class="max-w-7xl mx-auto px-6 py-8">
        <!-- Asset Information Block -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Asset Information</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Asset ID</label>
                    <input type="text" value="ASSET-2025-001" readonly class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Application Name</label>
                    <input type="text" value="E-Commerce Platform API" readonly class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 cursor-not-allowed">
                </div>
            </div>
        </div>

        <!-- Technical Debt Overview Block -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Total Issues Card Block -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Total Issues</p>
                        <p class="text-3xl font-bold text-gray-900" id="totalIssues">24</p>
                    </div>
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                </div>
            </div>
            <!-- Technical Debt Card Block -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Technical Debt</p>
                        <p class="text-3xl font-bold text-orange-600" id="technicalDebt">156 hrs</p>
                    </div>
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-orange-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                </div>
            </div>
            <!-- Resolution Rate Card Block -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Resolution Rate</p>
                        <p class="text-3xl font-bold text-green-600" id="resolutionRate">67%</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Issues Table Block -->
        <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Security Issues</h2>
                <p class="text-sm text-gray-600 mt-1">SCA and SAST vulnerability findings</p>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Issue ID</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Severity</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="issuesTableBody">
                        <!-- Issues will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Footer Block -->
    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="max-w-7xl mx-auto px-6 py-8">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600">Â© 2025 Snyk Auto Remediation Assistant</p>
                    <p class="text-xs text-gray-400 mt-1">Powered by AI for automated security remediation</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Documentation</a>
                    <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Support</a>
                    <a href="#" class="text-sm text-gray-500 hover:text-gray-700">API</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Dashboard Logic Script Block -->
    <script>
        // Sample data for security issues
        const securityIssues = [
            {
                id: 'SNYK-001',
                type: 'SCA',
                severity: 'Critical',
                title: 'Vulnerable dependency: lodash@4.17.15',
                status: 'Resolved',
                component: 'lodash',
                description: 'Prototype pollution vulnerability in lodash',
                remediation: 'Updated lodash to version 4.17.21',
                cvss: '9.8',
                cve: 'CVE-2020-8203'
            },
            {
                id: 'SNYK-002',
                type: 'SAST',
                severity: 'High',
                title: 'SQL Injection in user authentication',
                status: 'Unresolved',
                component: 'auth.js',
                description: 'Potential SQL injection vulnerability in login function',
                remediation: null,
                cvss: '8.1',
                cve: null
            },
            {
                id: 'SNYK-003',
                type: 'SCA',
                severity: 'High',
                title: 'Vulnerable dependency: express@4.16.4',
                status: 'In Progress',
                component: 'express',
                description: 'Multiple vulnerabilities in Express.js framework',
                remediation: 'Upgrading to Express 4.18.2',
                cvss: '7.5',
                cve: 'CVE-2022-24999'
            },
            {
                id: 'SNYK-004',
                type: 'SAST',
                severity: 'Medium',
                title: 'Cross-Site Scripting (XSS) vulnerability',
                status: 'Resolved',
                component: 'dashboard.js',
                description: 'Reflected XSS in search functionality',
                remediation: 'Implemented input sanitization and output encoding',
                cvss: '6.1',
                cve: null
            },
            {
                id: 'SNYK-005',
                type: 'SCA',
                severity: 'Low',
                title: 'Outdated dependency: moment@2.24.0',
                status: 'Unresolved',
                component: 'moment',
                description: 'Using outdated version of moment.js',
                remediation: null,
                cvss: '3.7',
                cve: null
            }
        ];

        // Severity color helper
        function getSeverityColor(severity) {
            switch(severity) {
                case 'Critical': return 'bg-red-100 text-red-800';
                case 'High': return 'bg-orange-100 text-orange-800';
                case 'Medium': return 'bg-yellow-100 text-yellow-800';
                case 'Low': return 'bg-blue-100 text-blue-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // Status color helper
        function getStatusColor(status) {
            switch(status) {
                case 'Resolved': return 'bg-green-100 text-green-800';
                case 'In Progress': return 'bg-blue-100 text-blue-800';
                case 'Unresolved': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // Toggle issue details row
        function toggleIssueDetails(issueId) {
            const detailsRow = document.getElementById(`details-${issueId}`);
            const expandIcon = document.getElementById(`expand-${issueId}`);
            
            if (detailsRow.classList.contains('hidden')) {
                detailsRow.classList.remove('hidden');
                expandIcon.style.transform = 'rotate(90deg)';
            } else {
                detailsRow.classList.add('hidden');
                expandIcon.style.transform = 'rotate(0deg)';
            }
        }

        // Simulate sending remediation request to AI
        function sendRemediationRequest(issueId) {
            const input = document.getElementById(`remediation-input-${issueId}`);
            const userAction = input.value.trim();
            
            if (!userAction) {
                alert('Please enter a remediation action');
                return;
            }
            
            // Simulate AI processing
            const button = document.getElementById(`send-btn-${issueId}`);
            button.innerHTML = 'Processing...';
            button.disabled = true;
            
            setTimeout(() => {
                alert(`AI remediation request sent for ${issueId}:\n"${userAction}"`);
                button.innerHTML = 'Send to AI';
                button.disabled = false;
                input.value = '';
            }, 2000);
        }

        // Render issues table
        function renderIssuesTable() {
            const tbody = document.getElementById('issuesTableBody');
            tbody.innerHTML = '';
            
            securityIssues.forEach(issue => {
                // Main row
                const mainRow = document.createElement('tr');
                mainRow.className = 'hover:bg-gray-50 cursor-pointer';
                mainRow.onclick = () => toggleIssueDetails(issue.id);
                
                mainRow.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${issue.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${issue.type === 'SCA' ? 'bg-purple-100 text-purple-800' : 'bg-indigo-100 text-indigo-800'}">
                            ${issue.type}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getSeverityColor(issue.severity)}">
                            ${issue.severity}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">${issue.title}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(issue.status)}">
                            ${issue.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <svg id="expand-${issue.id}" class="w-5 h-5 transform transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                        </svg>
                    </td>
                `;
                
                // Details row
                const detailsRow = document.createElement('tr');
                detailsRow.id = `details-${issue.id}`;
                detailsRow.className = 'hidden bg-gray-50';
                
                let detailsContent = `
                    <td colspan="6" class="px-6 py-6">
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Issue Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <p class="text-sm font-medium text-gray-700 mb-2">Description</p>
                                    <p class="text-sm text-gray-600 mb-4">${issue.description}</p>
                                    <p class="text-sm font-medium text-gray-700 mb-2">Component</p>
                                    <p class="text-sm text-gray-600 mb-4">${issue.component}</p>
                                    ${issue.cvss ? `
                                        <p class="text-sm font-medium text-gray-700 mb-2">CVSS Score</p>
                                        <p class="text-sm text-gray-600 mb-4">${issue.cvss}</p>
                                    ` : ''}
                                    ${issue.cve ? `
                                        <p class="text-sm font-medium text-gray-700 mb-2">CVE</p>
                                        <p class="text-sm text-gray-600">${issue.cve}</p>
                                    ` : ''}
                                </div>
                                <div>
                `;
                
                if (issue.status === 'Resolved' && issue.remediation) {
                    detailsContent += `
                        <p class="text-sm font-medium text-gray-700 mb-2">Remediation Applied</p>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <p class="text-sm text-green-800">${issue.remediation}</p>
                        </div>
                    `;
                } else if (issue.status === 'In Progress' && issue.remediation) {
                    detailsContent += `
                        <p class="text-sm font-medium text-gray-700 mb-2">Current Remediation</p>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <p class="text-sm text-blue-800">${issue.remediation}</p>
                        </div>
                    `;
                } else if (issue.status === 'Unresolved') {
                    detailsContent += `
                        <p class="text-sm font-medium text-gray-700 mb-2">Request AI Remediation</p>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <textarea id="remediation-input-${issue.id}" 
                                      placeholder="Describe the remediation action you'd like the AI to perform..."
                                      class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none"
                                      rows="3"></textarea>
                            <button id="send-btn-${issue.id}"
                                    onclick="sendRemediationRequest('${issue.id}')"
                                    class="mt-3 bg-snyk-purple text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors">
                                Send to AI
                            </button>
                        </div>
                    `;
                }
                
                detailsContent += `
                                </div>
                            </div>
                        </div>
                    </td>
                `;
                
                detailsRow.innerHTML = detailsContent;
                
                tbody.appendChild(mainRow);
                tbody.appendChild(detailsRow);
            });
        }

        // Update dashboard metrics
        function updateMetrics() {
            const totalIssues = securityIssues.length;
            const resolvedIssues = securityIssues.filter(issue => issue.status === 'Resolved').length;
            const resolutionRate = Math.round((resolvedIssues / totalIssues) * 100);
            
            // Calculate technical debt (simplified calculation)
            const debtHours = securityIssues.reduce((total, issue) => {
                const multiplier = {
                    'Critical': 20,
                    'High': 12,
                    'Medium': 6,
                    'Low': 2
                };
                return total + (issue.status !== 'Resolved' ? multiplier[issue.severity] || 0 : 0);
            }, 0);
            
            document.getElementById('totalIssues').textContent = totalIssues;
            document.getElementById('resolutionRate').textContent = `${resolutionRate}%`;
            document.getElementById('technicalDebt').textContent = `${debtHours} hrs`;
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            renderIssuesTable();
            updateMetrics();
        });
    </script>

    <!-- Particles.js Initialization Block -->
    <script>
        particlesJS('particles-js', {
            "particles": {
                "number": {
                    "value": 60,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#4C19FD"
                },
                "shape": {
                    "type": "circle",
                    "stroke": {
                        "width": 0,
                        "color": "#000000"
                    }
                },
                "opacity": {
                    "value": 1,
                    "random": true
                },
                "size": {
                    "value": 4,
                    "random": true
                },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#1E40AF",
                    "opacity": 0.3,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 2,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": true,
                        "mode": "repulse"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                },
                "modes": {
                    "repulse": {
                        "distance": 100,
                        "duration": 0.4
                    },
                    "push": {
                        "particles_nb": 4
                    }
                }
            },
            "retina_detect": true
        });
    </script>
    <!-- Miscellaneous Script Block (leave as is) -->
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97fbd8b40498d87a',t:'MTc1Nzk3ODM0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
